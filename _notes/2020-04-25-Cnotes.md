---
title: "C语言学习汇总"
tags:
  - C/C++
categories:
  - Algorithm Basics
---
温故而知新

## hello world
C语言具有高效、灵活、功能丰富、表达力强和较高的可移植性的特点，C语言环境包括文本编辑器和C编译器，本篇在[vs2019]()平台运行

[C99](https://zh.wikipedia.org/wiki/C%E8%AF%AD%E8%A8%80#C99)被ANSI于2000年3月采用。

2011年12月8日，ISO正式发布了新的C语言的新标准[C11](https://zh.wikipedia.org/wiki/C11)，之前被称为C1X，官方名称为`ISO/IEC 9899:2011`。新的标准提高了对C++的兼容性，是当前最新的C语言标准。在它之前的C语言标准为C99。这次修订新增了被主流C语言编译器(如GCC,Clang,Visual C++等)增加的内容，和引入了内存模型以更好的执行多线程。之前C99的一些被推迟的计划在C11中增加了，但是对C99仍保留向后兼容。

有时候，标准走在编译器的前面，而有时候，编译器又走在标准的后面……

### #include
头文件是C程序必不可少的内容，任何库函数的调用都需要提前包含头文件，处理头文件的过程为预编译过程

`#include<xx>`编译器会去系统配置的库环境变量或者用户配置的路径去搜索

`#include"xx"`编译器会先在项目的当前目录查找，找不到后才会去系统配置的库环境变量和用户配置的路径去搜索

常用头文件

| 头文件 | 功能 |	<center>描述</center> |
| :----: | :----: | :---- |
| [assert.h](https://www.runoob.com/cprogramming/c-standard-library-assert-h.html) | 诊断 |	仅包含assert宏。该宏可用来诊断程序状态，若检查失败，程序终止。|
| [ctype.h](https://www.runoob.com/cprogramming/c-standard-library-ctype-h.html) |	字符处理 | 包含判断字符类型及大小写转换的函数。|
| [errno.h](https://www.runoob.com/cprogramming/c-standard-library-errno-h.html) |	错误监测 | 在调用特定库函数后检测errno的值以判断调用过程中是否有错误发生。|
| [float.h](https://www.runoob.com/cprogramming/c-standard-library-float-h.html) |	浮点数特性 | 提供了描述浮点数特性的宏。|
| [limits.h](https://www.runoob.com/cprogramming/c-standard-library-limits-h.html) | 整型特性 |	提供了描述整数类型和字符类型特性的宏。|
| [locale.h](https://www.runoob.com/cprogramming/c-standard-library-locale-h.html) |	本地化 | 提供了一些支持程序国际化的函数。|
| [math.h](https://www.runoob.com/cprogramming/c-standard-library-math-h.html) | 数学计算 |	提供了大量用以数学计算的函数。|
| [setjmp.h](https://www.runoob.com/cprogramming/c-standard-library-setjmp-h.html) | 非本地跳转 |	提供了用于绕过正常的函数返回机制 |
| [signal.h](https://www.runoob.com/cprogramming/c-standard-library-signal-h.html) | 信号处理 |	提供了包括中断和运行时错误在内的异常情况处理函数。|
| [stdarg.h](https://www.runoob.com/cprogramming/c-standard-library-stdarg-h.html) | 不定参数 |	提供了支持函数处理不变个数的参数的工具。|
| [stddef.h](https://www.runoob.com/cprogramming/c-standard-library-stddef-h.html) | 常用定义 |	提供了常用的类型和宏。|
| [stdio.h](https://www.runoob.com/cprogramming/c-standard-library-stdio-h.html) | 输入输出 | 提供了大量输入输出函数。|
| [stdlib.h](https://www.runoob.com/cprogramming/c-standard-library-stdlib-h.html) | 常用实用函数 |	提供了大量实用的函数。|
| [string.h](https://www.runoob.com/cprogramming/c-standard-library-string-h.html) | 字符串处理 |	提供了大量字符串处理函数。|
| [time.h](https://www.runoob.com/cprogramming/c-standard-library-time-h.html) | 日期和时间 |	提供了获取、操纵和处理日期的函数。|

### main函数
一个C程序有且仅有且不能没有一个main函数

`int main(void){}`明确表明没有任何参数，`int main(){}`可以有参数，也可以没有

### 注释
注释可以增加程序的可读性，程序主要是给人看的，注释会被编译器忽略
- `//单行注释`
- `/*中间全都是注释，无论单行多行*/`

### 语法
C语言中包含关键字、标识符、常量、字符串值和符号

分号：语句结束符，每个语句必须以分号结束。它表明一个逻辑实体的结束。

标识符：用来标识变量、函数，或任何其他用户自定义项目的名称。一个标识符以字母`A-Z`或`a-z`或下划线`_`开始，后跟零个或多个字母、下划线和数字`0-9`。

关键字：C中的保留字，32个。这些保留字不能作为常量名、变量名或其他标识符名称。

| 关键字 | <center>说明</center> |
| :----: | :---- |
| auto | 声明自动变量 |
| break |	跳出当前循环 |
| case | 开关语句分支 |
| char | 声明字符型变量或函数返回值类型 |
| const	| 定义常量，如果一个变量被 const 修饰，那么它的值就不能再被改变 |
| continue | 结束当前循环，开始下一轮循环|
| default |	开关语句中的"其它"分支 |
| do | 循环语句的循环体 |
| double | 声明双精度浮点型变量或函数返回值类型 |
| else | 条件语句否定分支（与 if 连用）|
| enum | 声明枚举类型 |
| extern | 声明变量或函数是在其它文件或本文件的其他位置定义 |
| float |	声明浮点型变量或函数返回值类型 |
| for |	一种循环语句 |
| goto | 无条件跳转语句 |
| if | 条件语句 |
| int |	声明整型变量或函数 |
| long | 声明长整型变量或函数返回值类型 |
| register | 声明寄存器变量 |
| return |	子程序返回语句（可以带参数，也可不带参数） |
| short |	声明短整型变量或函数 |
| signed | 声明有符号类型变量或函数 |
| sizeof | 计算数据类型或变量长度（即所占字节数） |
| static | 声明静态变量 |
| struct | 声明结构体类型 |
| switch | 用于开关语句 |
| typedef |	用以给数据类型取别名 |
| unsigned | 声明无符号类型变量或函数 |
| union |	声明共用体类型 |
| void | 声明函数无返回值或无参数，声明无类型指针 |
| volatile | 说明变量在程序执行中可被隐含地改变 |
| while | 循环语句的循环条件 |

C99 新增关键字

`_Bool`、`_Complex`、`_Imaginary`、`inline`、`restrict`

C11 新增关键字

`_Alignas`、`_Alignof`、`_Atomic`、`_Generic`、`_Noreturn`、`_Static_assert`、`_Thread_local`

空格：用来分隔关键字和变量名，帮助编译器区分；除此以外，空白符、制表符、换行符均会被编译器忽略

### 数据类型（以x64机器为例）
整型

| 类型 | 存储大小 |	值范围 |
| :----: | :----: | ---- |
| char | 1 字节	| -128 到 127 或 0 到 255 |
| unsigned char | 1 字节 | 0 到 255 |
| signed char |	1 字节 | -128 到 127 |
| int |	4 字节 | -32,768 到 32,767 或 -2,147,483,648 到 2,147,483,647 |
| unsigned int | 4 字节 | 0 到 65,535 或 0 到 4,294,967,295 |
| short |	2 字节 | -32,768 到 32,767 |
| unsigned short | 2 字节 |	0 到 65,535 |
| long | 4 字节 |	-2,147,483,648 到 2,147,483,647 |
| unsigned long |	4 字节 | 0 到 4,294,967,295 |

浮点类型

| 类型 | 存储大小 |	值范围 | 精度 |
| :----: | :----: | ---- | ---- |
| float |	4 字节 | 1.2E-38 到 3.4E+38 |	6 位小数|
| double | 8 字节 | 2.3E-308 到 1.7E+308 | 15 位小数 |
| long double	| 16 字节	| 3.4E-4932 到 1.1E+4932 | 19 位小数 |

### 变量
C 中每个变量都有特定的类型，类型决定了变量存储的大小和布局，该范围内的值都可以存储在内存中，运算符可应用于变量上。

变量的名称可以由字母、数字和下划线字符组成。它必须以字母或下划线开头。大写字母和小写字母是不同的，因为 C 是大小写敏感的。

几种基本的变量类型

| 类型 | <center>描述</center> |
| :----: | ---- |
| char | 通常是一个字节（8位）。这是一个整数类型。|
| int |	对机器而言，整数的最自然的大小。|
| float | 单精度浮点值。单精度是这样的格式，1位符号，8位指数，23位小数。|
| double | 双精度浮点值。双精度是1位符号，11位指数，52位小数。|
| void | 表示类型的缺失。|

除此之外还有枚举、指针、数组、结构、共用体等等，他们都是需要建立存储空间的，而使用`extern`关键字声明变量名而不定义它，不需要建立存储空间

C 中的左值（Lvalues）和右值（Rvalues）
- 左值（lvalue）：指向内存位置的表达式被称为左值表达式。左值可以出现在赋值号的左边或右边。
- 右值（rvalue）：指存储在内存中某些地址的数值。右值是不能对其进行赋值的表达式，也就是说，右值可以出现在赋值号的右边，但不能出现在赋值号的左边。

### 常量
常量是固定值，在程序执行期间不会改变，可以是任何的基本数据类型，比如整数常量、浮点常量、字符常量，或字符串字面值，也有枚举常量

- 整数常量

整数常量可以是十进制、八进制或十六进制的常量。前缀指定基数：0x 或 0X 表示十六进制，0 表示八进制，不带前缀则默认表示十进制。

整数常量也可以带一个后缀，后缀是 U 和 L 的组合，U 表示无符号整数（unsigned），L 表示长整数（long）。后缀可以是大写，也可以是小写，U 和 L 的顺序任意。

```c
212         /* 合法的 */
215u        /* 合法的 */
0xFeeL      /* 合法的 */
078         /* 非法的：8 不是八进制的数字 */
032UU       /* 非法的：不能重复后缀 */
85         /* 十进制 */
0213       /* 八进制 */
0x4b       /* 十六进制 */
30         /* 整数 */
30u        /* 无符号整数 */
30l        /* 长整数 */
30ul       /* 无符号长整数 */
```

- 浮点常量

浮点常量由整数部分、小数点、小数部分和指数部分组成。您可以使用小数形式或者指数形式来表示浮点常量。

当使用小数形式表示时，必须包含整数部分、小数部分，或同时包含两者。当使用指数形式表示时， 必须包含小数点、指数，或同时包含两者。带符号的指数是用 e 或 E 引入的。

```c
3.14159       /* 合法的 */
314159E-5L    /* 合法的 */
510E          /* 非法的：不完整的指数 */
210f          /* 非法的：没有小数或指数 */
.e55          /* 非法的：缺少整数或分数 */
```

- 字符常量

字符常量是括在单引号中，例如，'x' 可以存储在 char 类型的简单变量中。

字符常量可以是一个普通的字符（例如 'x'）、一个转义序列（例如 '\t'），或一个通用的字符（例如 '\u02C0'）。

- 字符串常量

字符串字面值或常量是括在双引号 "" 中的。一个字符串包含类似于字符常量的字符：普通的字符、转义序列和通用的字符。

- 定义常量
  - #define 预处理器：`#define identifier value`
  - const 关键字：`const type variable = value;`

### 存储类
存储类：`auto`,`register`,`static`,`extern`

- auto

auto 存储类是所有局部变量默认的存储类。

```c
//定义两个带有相同存储类的变量，auto 只能用在函数内，即 auto 只能修饰局部变量
int mount;
auto int month;
```

- register

register 存储类用于定义存储在寄存器中而不是 RAM 中的局部变量。这意味着变量的最大尺寸等于寄存器的大小（通常是一个词），且不能对它应用一元的 '&' 运算符（因为它没有内存位置）。

寄存器只用于需要快速访问的变量，比如计数器。还应注意的是，定义 'register' 并不意味着变量将被存储在寄存器中，它意味着变量可能存储在寄存器中，这取决于硬件和实现的限制。

```c
{
  register int  miles;
}
```

- static

static 存储类指示编译器在程序的生命周期内保持局部变量的存在，而不需要在每次它进入和离开作用域时进行创建和销毁。因此，使用 static 修饰局部变量可以在函数调用之间保持局部变量的值。

static 修饰符也可以应用于全局变量。当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。全局声明的一个 static 变量或方法可以被任何函数或方法调用，只要这些方法出现在跟 static 变量或方法同一个文件中。

```c
#include <stdio.h>

/* 函数声明 */
void func(void);
static int count=10;        /* 全局变量 - static 是默认的 */
int main(){
  while (count--) {
      func();
  }
  return 0;
}
void func(void){
/* 'thing' 是 'func' 的局部变量 - 只初始化一次
  每次调用函数 'func' 'thing' 值不会被重置。*/
  static int thing=5;
  thing++;
  printf(" thing 为 %d ， count 为 %d\n", thing, count);
}
```

- extern

extern 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。当您使用 extern 时，对于无法初始化的变量，会把变量名指向一个之前定义过的存储位置。

当您有多个文件且定义了一个可以在其他文件中使用的全局变量或函数时，可以在其他文件中使用 extern 来得到已定义的变量或函数的引用。可以这么理解，extern 是用来在另一个文件中声明一个全局变量或函数。

```c
//第一个文件：main.c
#include <stdio.h>

int count ;
extern void write_extern();
int main()
{
   count = 5;
   write_extern();
}
```
```c
//第二个文件：support.c
#include <stdio.h>

extern int count;
void write_extern(void)
{
   printf("count is %d\n", count);
}
```

### 运算符
C 语言内置了丰富的运算符，并提供了以下类型的运算符：算术运算符、关系运算符、逻辑运算符、位运算符、赋值运算符、杂项运算符

- 算术运算符

| 运算符 | <center>描述</center> | <center>实例</center> |
| :----: | ---- | ---- |
| + |	把两个操作数相加 | A + B 将得到 30 |
| - |	从第一个操作数中减去第二个操作数 | A - B 将得到 -10 |
| *	| 把两个操作数相乘 | A * B 将得到 200 |
| / |	分子除以分母 | B / A 将得到 2 |
| % |	取模运算符，整除后的余数 | B % A 将得到 0 |
| ++ | 自增运算符，整数值增加 1 |	A++ 将得到 11 |
| -- | 自减运算符，整数值减少 1 |	A-- 将得到 9 |

- 关系运算符

假设变量 A 的值为 10，变量 B 的值为 20

| 运算符 | <center>描述</center> | <center>实例</center> |
| :----: | ---- | ---- |
| == | 检查两个操作数的值是否相等，如果相等则条件为真。|	(A == B) 为假。|
| != |	检查两个操作数的值是否相等，如果不相等则条件为真。|	(A != B) 为真。|
| > |	检查左操作数的值是否大于右操作数的值，如果是则条件为真。|	(A > B) 为假。|
| < |	检查左操作数的值是否小于右操作数的值，如果是则条件为真。|	(A < B) 为真。|
| >= |	检查左操作数的值是否大于或等于右操作数的值，如果是则条件为真。|	(A >= B) 为假。|
| <= |	检查左操作数的值是否小于或等于右操作数的值，如果是则条件为真。|	(A <= B) 为真。|

- 逻辑运算符

假设变量 A 的值为 1，变量 B 的值为 0

| 运算符 | <center>描述</center> | <center>实例</center> |
| :----: | ---- | ---- |
| `&&` |	称为逻辑与运算符。如果两个操作数都非零，则条件为真。|	`(A && B)` 为假。|
| `||` |	称为逻辑或运算符。如果两个操作数中有任意一个非零，则条件为真。|	`(A || B)` 为真。|
| `!` |	称为逻辑非运算符。用来逆转操作数的逻辑状态。如果条件为真则逻辑非运算符将使其为假。|	`!(A && B)` 为真。|

- 位运算符

假设变量 A 的值为 60，变量 B 的值为 13，

| 运算符 | <center>描述</center> | <center>实例</center> |
| :----: | ---- | ---- |
| `&` | 按位与操作，按二进制位进行"与"运算。运算规则：

```c
0&0=0;
0&1=0;
1&0=0;
1&1=1;
```
| (A & B) 将得到 12，即为 0000 1100 |
| `|` | 按位或运算符，按二进制位进行"或"运算。运算规则：
```
0|0=0;
0|1=1;
1|0=1;
1|1=1;
```
|	(A | B) 将得到 61，即为 0011 1101 |
| `^` | 异或运算符，按二进制位进行"异或"运算。运算规则：
```
0^0=0;
0^1=1;
1^0=1;
1^1=0;
```
|	(A ^ B) 将得到 49，即为 0011 0001 |
| `~` | 取反运算符，按二进制位进行"取反"运算。运算规则：
```
~1=0;
~0=1;
```
|	(~A ) 将得到 -61，即为 1100 0011，一个有符号二进制数的补码形式。|
| `<<` |	二进制左移运算符。将一个运算对象的各二进制位全部左移若干位（左边的二进制位丢弃，右边补0）。|	A << 2 将得到 240，即为 1111 0000 |
| `>>` | 二进制右移运算符。将一个数的各二进制位全部右移若干位，正数左补0，负数左补1，右边丢弃。|	A >> 2 将得到 15，即为 0000 1111 |